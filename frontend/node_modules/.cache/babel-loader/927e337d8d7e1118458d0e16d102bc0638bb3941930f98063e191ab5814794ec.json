{"ast":null,"code":"import axios from'axios';import{getAuth}from'firebase/auth';const API_URL=process.env.REACT_APP_BACKEND_URL||'http://localhost:5000';const api=axios.create({baseURL:API_URL,headers:{'Content-Type':'application/json'}});// Add a request interceptor to add the auth token\napi.interceptors.request.use(async config=>{try{const auth=getAuth();const user=auth.currentUser;if(user){const token=await user.getIdToken(true);// Force refresh token\nconfig.headers.Authorization=`Bearer ${token}`;}}catch(error){console.error('Error getting auth token:',error);// Don't throw error here, let the request proceed without token\n// The server will handle unauthorized requests\n}return config;},error=>{return Promise.reject(error);});// Add a response interceptor to handle errors\napi.interceptors.response.use(response=>response,error=>{if(error.response){switch(error.response.status){case 401:// Token expired or invalid\nconsole.error('Authentication error:',error.response.data);// Let the component handle the redirect to login\nbreak;case 403:console.error('Access forbidden:',error.response.data);break;case 404:console.error('Resource not found:',error.response.data);break;case 500:console.error('Server error:',error.response.data);break;default:console.error('API Error:',error.response.data);}}else if(error.request){// Request was made but no response received\nconsole.error('No response received:',error.request);}else{// Error in request configuration\nconsole.error('Request configuration error:',error.message);}return Promise.reject(error);});const expenseApi={// Expense-related endpoints\ngetExpenses:params=>api.get('/api/expenses',{params}),createExpense:data=>api.post('/api/expenses',data),updateExpense:(id,data)=>api.put(`/api/expenses/${id}`,data),deleteExpense:id=>api.delete(`/api/expenses/${id}`),getMonthlyReport:params=>api.get('/api/expenses/monthly-report',{params}),getDashboardData:()=>api.get('/api/expenses/dashboard')};export{api,expenseApi};","map":{"version":3,"names":["axios","getAuth","API_URL","process","env","REACT_APP_BACKEND_URL","api","create","baseURL","headers","interceptors","request","use","config","auth","user","currentUser","token","getIdToken","Authorization","error","console","Promise","reject","response","status","data","message","expenseApi","getExpenses","params","get","createExpense","post","updateExpense","id","put","deleteExpense","delete","getMonthlyReport","getDashboardData"],"sources":["S:/GITHUB PROJECTS/EXPENSE-TRACKER/frontend/src/utils/api.js"],"sourcesContent":["import axios from 'axios';\nimport { getAuth } from 'firebase/auth';\n\nconst API_URL = process.env.REACT_APP_BACKEND_URL || 'http://localhost:5000';\n\nconst api = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Add a request interceptor to add the auth token\napi.interceptors.request.use(\n  async (config) => {\n    try {\n      const auth = getAuth();\n      const user = auth.currentUser;\n      \n      if (user) {\n        const token = await user.getIdToken(true); // Force refresh token\n        config.headers.Authorization = `Bearer ${token}`;\n      }\n    } catch (error) {\n      console.error('Error getting auth token:', error);\n      // Don't throw error here, let the request proceed without token\n      // The server will handle unauthorized requests\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Add a response interceptor to handle errors\napi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response) {\n      switch (error.response.status) {\n        case 401:\n          // Token expired or invalid\n          console.error('Authentication error:', error.response.data);\n          // Let the component handle the redirect to login\n          break;\n        case 403:\n          console.error('Access forbidden:', error.response.data);\n          break;\n        case 404:\n          console.error('Resource not found:', error.response.data);\n          break;\n        case 500:\n          console.error('Server error:', error.response.data);\n          break;\n        default:\n          console.error('API Error:', error.response.data);\n      }\n    } else if (error.request) {\n      // Request was made but no response received\n      console.error('No response received:', error.request);\n    } else {\n      // Error in request configuration\n      console.error('Request configuration error:', error.message);\n    }\n    return Promise.reject(error);\n  }\n);\n\nconst expenseApi = {\n  // Expense-related endpoints\n  getExpenses: (params) => api.get('/api/expenses', { params }),\n  createExpense: (data) => api.post('/api/expenses', data),\n  updateExpense: (id, data) => api.put(`/api/expenses/${id}`, data),\n  deleteExpense: (id) => api.delete(`/api/expenses/${id}`),\n  getMonthlyReport: (params) => api.get('/api/expenses/monthly-report', { params }),\n  getDashboardData: () => api.get('/api/expenses/dashboard'),\n};\n\nexport { api, expenseApi };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}